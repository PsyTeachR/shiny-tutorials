<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Second Shiny App</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<link href="site_libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
<script src="site_libs/bs3compat-0.3.0/transition.js"></script>
<script src="site_libs/bs3compat-0.3.0/tabs.js"></script>
<script src="site_libs/bs3compat-0.3.0/bs3compat.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<meta property="og:title" content="Shiny Tutorials">
<meta property="og:description" content="Tutorials from the psyTeachR group on using Shiny for psychology-relevant apps.">
<meta property="og:image" content="images/shinyintro_card.png">
<meta property="og:url" content="https://psyteachr.github.io/shiny-tutorials/">
<meta property="twitter:card" content="summary_large_image">
<link rel="shortcut icon" href="images/shinyintro.png">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6NP3MF25W3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6NP3MF25W3');
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Shiny Tutorials</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="/">
    <span class="fa fa-home"></span>
     
    psyTeachR
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Second Shiny App</h1>

</div>


<p>In this tutorial, we’re going to start with the blank framework for a shiny app. We will add some text, input control <a href="defs.html#widget">widgets</a>, output text, and an output plot.</p>
<ul>
<li>Knowledge: <a href="https://gupsych.github.io/data_skills/01_intro.html">Basic RStudio and R</a>, can make an RStudio project, run the RStudio demo shiny app and make minor edits (see <a href="01-first-app.html">first shiny app</a> for a tutorial)</li>
<li>Programs: <a href="http://cran.r-project.org/mirrors.html">R</a> and <a href="https://www.rstudio.com/products/rstudio/download3/">RStudio</a></li>
<li>Packages: <code>shiny</code>, <code>ggplot2</code>, <code>dplyr</code></li>
<li>Time: ~ 20 minutes</li>
</ul>
<div id="create-a-framework-app" class="section level1">
<h1>Create a Framework App</h1>
<p><input type="checkbox" class="progress"></p>
<div id="set-up-the-project" class="section level2">
<h2>Set up the project</h2>
<p>See the <a href="01-first-app.html">first tutorial</a> for how to do this. Name it <code>effect_guess</code>.</p>
<p><input type="checkbox" class="progress"></p>
</div>
<div id="add-blank-framework" class="section level2">
<h2>Add blank framework</h2>
<p>If you set up a default Shiny project in RStudio, it will create a file called <code>app.R</code> with the demo app. Replace the text (or delete the file and create a new file called <code>app.R</code>) with the framework below. Save it and run the app.</p>
<pre class="r"><code># Libraries ----
library(shiny)

# Define UI ----
ui &lt;- fluidPage(

  # . Application title ----
  titlePanel(&quot;Title&quot;),

  # . Explanatory text ----
  p(&quot;Put your explanatory text here. Do not forget this or people won&#39;t know how to use your app!&quot;),

  sidebarLayout(
    # . Sidebar ----
    sidebarPanel(
      p(&quot;Sidebar text...&quot;)
    ),

    # . Main Panel ----
    mainPanel(
      p(&quot;Main panel text...&quot;)
    )
  )
)

# Define server logic ----
server &lt;- function(input, output, session) {
}

# Run the application ----
shinyApp(ui = ui, server = server)</code></pre>
<p class="alert alert-info">
In RStudio, you can display the document outline using <code>shift-cmd-O</code> or by clicking on the outline icon at the top right of the <a href="defs.html#panes">source pane</a>. <a href="defs.html#commment">Comments</a> get added to the outline if you put four or more dashes, equal signs, or hashes at the end. This is a great way to keep track of more complicated scripts.
</p>
<p><input type="checkbox" class="progress"></p>
</div>
<div id="replace-default-text" class="section level2">
<h2>Replace default text</h2>
<p>In this app, we’re going to show a plot with a random effect size for a between-group design with a random N and ask the user to guess the effect size). So the first thing you should do is explain what your app is doing in the explanatory text. You can also add a title.</p>
<p class="alert alert-info">
As always, run your app after every unit of changes. It’s easier to catch typos and mistakes if you’ve only changed a little bit since the last time you successfully ran the app.
</p>
<pre class="r"><code>  # . Application title ----
  titlePanel(&quot;Guess the Effect Size&quot;),

  # . Explanatory text ----
  p(&quot;This app will show you a graph of simulated data with a random number of observations in each of two groups and a random effect size. The effect size will be between -3 and 3, your job is to guess the size of the effect.&quot;),</code></pre>
<p>The framework we’re using here is a <code>sidebarLayout</code>. This <a href="defs.html#function">function</a> takes two <a href="defs.html#argument">arguments</a>, the <code>sidebarPanel</code> and the <code>mainPanel</code>. Usually, the sidebar panel contains all of the control <a href="defs.html#widget">widgets</a> that the user can set, and the main panel contains the output result, like some text or a graph generated using the input settings.</p>
<p>Add some explanatory text to the sidebar and/or main panels by editing the relevant paragraph functions (<code>p()</code>), or delete these if you don’t need any static text.</p>
<pre class="r"><code>  sidebarLayout(
    # . Sidebar ----
    sidebarPanel(
    ),

    # . Main Panel ----
    mainPanel(
    )
  )</code></pre>
</div>
</div>
<div id="add-input-and-output" class="section level1">
<h1>Add Input and Output</h1>
<p><input type="checkbox" class="progress"></p>
<div id="sliderinput" class="section level2">
<h2>sliderInput</h2>
<p>We’re going to use the <code>sliderInput</code> function to let the user guess the effect size in the plot.</p>
<pre class="r"><code>    sidebarPanel(
      # . . d_guess slide ----
      sliderInput(&quot;d_guess&quot;, &quot;My effect size (d) guess&quot;,
                  min = -3, max = 3, value = 0, step = 0.1)
    ),</code></pre>
<p class="alert alert-info">
I use periods/full stops (<code>.</code>) to indent the document outline comments.
</p>
<p><input type="checkbox" class="progress"></p>
</div>
<div id="actionbutton" class="section level2">
<h2>actionButton</h2>
<p>We want the user to be able to create a new simulated dataset, so we can make a button that generates a new dataset, graphs it, and resets the effect size slider. Add this widget function after the <code>sliderInput</code> widget function (and run the app).</p>
<pre class="r"><code>    sidebarPanel(
      # . . d_guess slide ----
      sliderInput(&quot;d_guess&quot;, &quot;My effect size (d) guess&quot;,
                  min = -3, max = 3, value = 0, step = 0.1),
      # . . new_sim button ----
      actionButton(&quot;new_sim&quot;, &quot;Simulate a new dataset&quot;)
    ),</code></pre>
<div class="alert alert-warning">
<p>
Don’t forget to separate the two widget functions with commas. They are both arguments to the <code>sidebarPanel</code> function, so you will get a confusing-looking error message like the one below if you leave out the comma. The first thing you should do with these error messages is to scan for line numbers and look at these lines and the lines before and after them.
</p>
<pre><code>Listening on http://127.0.0.1:5327
Error in parse(file, keep.source = FALSE, srcfile = src, encoding = enc) : 
  /Users/lisad/apps/custom-app/app.R:20:7: unexpected symbol
19:       # . . new_sim button ----
20:       actionButton
          ^
Possible missing comma at:
20:      actionButton("new_sim", "Simulate a new dataset")
         ^
Warning: Error in sourceUTF8: Error sourcing /Users/lisad/apps/custom-app/app.R
Stack trace (innermost first):
    1: runApp
Error : Error sourcing /Users/lisad/apps/custom-app/app.R</code></pre>
</div>
<p><input type="checkbox" class="progress"></p>
</div>
<div id="textoutput" class="section level2">
<h2>textOutput</h2>
<p>Outputs normally go in the main panel (although they don’t have to). You can use the function <code>textOutput</code> to interactively display some text to the user. We want to let people know how many observations are in the randomly generated data, so we’ll use a <code>textOutput</code> function with the ID <code>"current_n"</code>.</p>
<pre class="r"><code>    mainPanel(
      # . . current_n output ----
      textOutput(&quot;current_n&quot;)
    )</code></pre>
<p>When you run this, you’ll see that it doesn’t actually show anything. That’s because</p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
